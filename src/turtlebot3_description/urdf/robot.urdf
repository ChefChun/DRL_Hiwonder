<?xml version="1.0" ?>
<!-- =================================================================================== -->
<!-- |    This document was autogenerated by xacro from /home/evan/hiwonder/src/robot_gazebo/urdf/robot.gazebo.xacro | -->
<!-- |    EDITING THIS FILE BY HAND IS NOT RECOMMENDED                                 | -->
<!-- =================================================================================== -->
<robot name="robot">
  <material name="black">
    <color rgba="0.1 0.1 0.1 1.0"/>
  </material>
  <material name="blue">
    <color rgba="0.0 0.0 0.8 1.0"/>
  </material>
  <material name="green">
    <color rgba="0.4 0.9 0.4 1.0"/>
  </material>
  <material name="gray">
    <color rgba="0.7 0.7 0.7 1.0"/>
  </material>
  <material name="darkgray">
    <color rgba="0.3 0.3 0.3 1.0"/>
  </material>
  <material name="red">
    <color rgba="0.8 0.0 0.0 1.0"/>
  </material>
  <material name="white">
    <color rgba="1.0 1.0 1.0 1.0"/>
  </material>
  <material name="yellow">
    <color rgba="0.8 0.8 0.0 1.0"/>
  </material>
  <link name="imu_link"/>
  <joint name="imu_joint" type="fixed">
    <origin rpy="0 0 -1.5707963267948966" xyz="0 0 0.1115910821576746"/>
    <parent link="base_link"/>
    <child link="imu_link"/>
  </joint>
  <link name="lidar_frame"/>
  <joint name="lidar_frame_joint" type="fixed">
    <origin rpy="0 0 3.141592653589793" xyz="0 0 0"/>
    <parent link="lidar_link"/>
    <child link="lidar_frame"/>
  </joint>
  <link name="base_footprint"/>
  <joint name="base_joint" type="fixed">
    <parent link="base_footprint"/>
    <child link="base_link"/>
    <origin rpy="0 0 0" xyz="0.0 0.0 0"/>
  </joint>
  <link name="base_link">
    <inertial>
      <mass value="1.6"/>
      <inertia ixx="0.005530133333333334" ixy="0" ixz="0" iyy="0.013798933333333332" iyz="0" izz="0.015095466666666666"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://turtlebot3_description/meshes/robot/base_link.STL"/>
      </geometry>
      <material name="black"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="-0.004 0 0.08499999999999999"/>
      <geometry>
        <box size="0.296 0.16 0.126"/>
      </geometry>
    </collision>
  </link>
  <link name="back_shell_link">
    <inertial>
      <mass value="1.6"/>
      <inertia ixx="0.005056666666666668" ixy="0" ixz="0" iyy="0.007656666666666667" iyz="0" izz="0.010306666666666667"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://turtlebot3_description/meshes/robot/back_shell_link.STL"/>
      </geometry>
      <material name="green"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="-0.04 0 0.1955"/>
      <geometry>
        <box size="0.22 0.17 0.095"/>
      </geometry>
    </collision>
  </link>
  <joint name="back_shell_joint" type="fixed">
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <parent link="base_link"/>
    <child link="back_shell_link"/>
    <axis xyz="0 0 0"/>
  </joint>
  <link name="link1">
    <inertial>
      <origin rpy="0 0 0" xyz="0.000273458158848059 4.49697391709507E-08 0.0127682239974202"/>
      <mass value="0.0117617552923888"/>
      <inertia ixx="2.42304907313034E-06" ixy="8.36427578709212E-13" ixz="-4.88815706874446E-08" iyy="2.24167366920736E-06" iyz="2.4783598093895E-12" izz="3.78066563706159E-06"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://turtlebot3_description/meshes/robot/link1.STL"/>
      </geometry>
      <material name="black"/>
    </visual>
  </link>
  <joint name="joint1" type="revolute">
    <origin rpy="0 0 0" xyz="0.031299 0.00068637 0.16156"/>
    <parent link="base_link"/>
    <child link="link1"/>
    <axis xyz="0 0 1"/>
    <limit effort="1000" lower="-2.09" upper="2.09" velocity="10"/>
  </joint>
  <link name="depth_cam_link">
    <inertial>
      <origin rpy="0 0 0" xyz="-0.00267477609208174 -1.63263137193841E-05 -0.00522210299748882"/>
      <mass value="0.22552781639362"/>
      <inertia ixx="0.000408522155796754" ixy="-7.65921501012663E-09" ixz="1.66771046033071E-07" iyy="4.81468336120099E-05" iyz="-5.69880969191004E-09" izz="0.000428962116485588"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://turtlebot3_description/meshes/robot/depth_cam_link.STL"/>
      </geometry>
      <material name="black"/>
    </visual>
  </link>
  <joint name="depth_cam_joint" type="fixed">
    <origin rpy="0 0 0" xyz="0.0057651 0.00025 0.057913"/>
    <parent link="link1"/>
    <child link="depth_cam_link"/>
    <axis xyz="0 0 0"/>
  </joint>
  <link name="lidar_link">
    <inertial>
      <origin rpy="0 0 0" xyz="-0.00221931680115031 0.000376419599582719 -0.0173018800523995"/>
      <mass value="0.0438457545362112"/>
      <inertia ixx="1.59958556469832E-05" ixy="4.53029353441676E-08" ixz="2.33892337631863E-07" iyy="2.04183700013467E-05" iyz="-1.10000396493279E-08" izz="3.50483610398295E-05"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://turtlebot3_description/meshes/robot/lidar_link.STL"/>
      </geometry>
      <material name="black"/>
    </visual>
  </link>
  <joint name="lidar_joint" type="fixed">
    <origin rpy="0 0 0" xyz="0.10414 0.000685 0.13378"/>
    <parent link="base_link"/>
    <child link="lidar_link"/>
    <axis xyz="0 0 0"/>
  </joint>
  <link name="lidar_sim_frame"/>
  <joint name="lidar_sim_frame_joint" type="fixed">
    <origin rpy="0 0 3.141592653589793" xyz="0 0 0"/>
    <parent link="lidar_link"/>
    <child link="lidar_sim_frame"/>
  </joint>
  <link name="wheel_right_front">
    <inertial>
      <mass value="0.1"/>
      <inertia ixx="7.517500000000001e-05" ixy="0" ixz="0" iyy="7.517500000000001e-05" iyz="0" izz="0.00012500000000000003"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://turtlebot3_description/meshes/robot/wheel_right_front.STL"/>
      </geometry>
      <material name="black"/>
    </visual>
    <collision>
      <origin rpy="1.5707963267948966 0 0" xyz="0 -0.019 0"/>
      <geometry>
        <cylinder length="0.039" radius="0.05"/>
      </geometry>
    </collision>
  </link>
  <joint name="wheel_right_front_joint" type="fixed">
    <origin rpy="0 0 0" xyz="0.10733 -0.091241 0.050002"/>
    <parent link="base_link"/>
    <child link="wheel_right_front"/>
    <axis xyz="0 0 0"/>
  </joint>
  <link name="wheel_right_back">
    <inertial>
      <mass value="0.1"/>
      <inertia ixx="7.517500000000001e-05" ixy="0" ixz="0" iyy="7.517500000000001e-05" iyz="0" izz="0.00012500000000000003"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://turtlebot3_description/meshes/robot/wheel_right_back.STL"/>
      </geometry>
      <material name="black"/>
    </visual>
    <collision>
      <origin rpy="1.5707963267948966 0 0" xyz="0 -0.019 0"/>
      <geometry>
        <cylinder length="0.039" radius="0.05"/>
      </geometry>
    </collision>
  </link>
  <joint name="wheel_right_back_joint" type="fixed">
    <origin rpy="0 0 0" xyz="-0.106 -0.091444 0.050335"/>
    <parent link="base_link"/>
    <child link="wheel_right_back"/>
    <axis xyz="0 0 0"/>
  </joint>
  <link name="wheel_left_back">
    <inertial>
      <mass value="0.1"/>
      <inertia ixx="7.517500000000001e-05" ixy="0" ixz="0" iyy="7.517500000000001e-05" iyz="0" izz="0.00012500000000000003"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://turtlebot3_description/meshes/robot/wheel_left_back.STL"/>
      </geometry>
      <material name="black"/>
    </visual>
    <collision>
      <origin rpy="1.5707963267948966 0 0" xyz="0 0.019 0"/>
      <geometry>
        <cylinder length="0.039" radius="0.05"/>
      </geometry>
    </collision>
  </link>
  <joint name="wheel_left_back_joint" type="fixed">
    <origin rpy="0 0 0" xyz="-0.10599 0.090107 0.050328"/>
    <parent link="base_link"/>
    <child link="wheel_left_back"/>
    <axis xyz="0 0 0"/>
  </joint>
  <link name="wheel_left_front">
    <inertial>
      <mass value="0.1"/>
      <inertia ixx="7.517500000000001e-05" ixy="0" ixz="0" iyy="7.517500000000001e-05" iyz="0" izz="0.00012500000000000003"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://turtlebot3_description/meshes/robot/wheel_left_front.STL"/>
      </geometry>
      <material name="black"/>
    </visual>
    <collision>
      <origin rpy="1.5707963267948966 0 0" xyz="0 0.019 0"/>
      <geometry>
        <cylinder length="0.039" radius="0.05"/>
      </geometry>
    </collision>
  </link>
  <joint name="wheel_left_front_joint" type="fixed">
    <origin rpy="0 0 0" xyz="0.10734 0.092607 0.049998"/>
    <parent link="base_link"/>
    <child link="wheel_left_front"/>
    <axis xyz="0 0 0"/>
  </joint>
  <link name="top_wheel_base_link">
    <inertial>
      <mass value="0.0001"/>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <inertia ixx="0.022500083333333337" ixy="0.0" ixz="0.0" iyy="0.022500083333333337" iyz="0.0" izz="0.045"/>
    </inertial>
  </link>
  <joint name="top_wheel_base_joint" type="continuous">
    <parent link="base_footprint"/>
    <child link="top_wheel_base_link"/>
    <origin rpy="0 0 0" xyz="0 0 0.1"/>
    <axis xyz="0 0 1"/>
  </joint>
  <link name="bottom_wheel_base_link">
    <inertial>
      <mass value="0.0001"/>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <inertia ixx="2250.008333333333" ixy="0.0" ixz="0.0" iyy="2250.008333333333" iyz="0.0" izz="4500.0"/>
    </inertial>
  </link>
  <joint name="bottom_wheel_base_joint" type="continuous">
    <parent link="top_wheel_base_link"/>
    <child link="bottom_wheel_base_link"/>
    <origin rpy="0 0 0" xyz="0 0 -0.1"/>
    <axis xyz="0 0 1"/>
  </joint>
  <link name="wheel_link">
    <inertial>
      <mass value="0.0001"/>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <inertia ixx="7.921083333333334e-07" ixy="0.0" ixz="0.0" iyy="7.921083333333334e-07" iyz="0.0" izz="1.5842e-06"/>
    </inertial>
    <collision>
      <geometry>
        <cylinder length="0.001" radius="0.178"/>
      </geometry>
      <origin rpy="0 0 0" xyz="0 0 0"/>
    </collision>
  </link>
  <joint name="wheel_joint" type="continuous">
    <parent link="bottom_wheel_base_link"/>
    <child link="wheel_link"/>
    <origin rpy="-1.57 0 0" xyz="0 0 0.1735"/>
    <axis xyz="0 0 1"/>
  </joint>
  <ros2_control name="IgnitionSystem" type="system">
    <hardware>
      <plugin>ign_ros2_control/IgnitionSystem</plugin>
    </hardware>
    <joint name="joint1">
      <command_interface name="position">
        <param name="min">-2.09</param>
        <param name="max">2.09</param>
      </command_interface>
      <state_interface name="position">
        <param name="initial_value">0</param>
      </state_interface>
      <state_interface name="velocity"/>
      <state_interface name="effort"/>
    </joint>
  </ros2_control>
  <gazebo reference="lidar_link">
    <sensor name="gpu_lidar" type="gpu_lidar">
      <!-- <pose>0 0 0 0 0 0</pose>             -->
      <topic>scan</topic>
      <update_rate>10</update_rate>
      <ignition_frame_id>lidar_link</ignition_frame_id>
      <ray>
        <scan>
          <horizontal>
            <samples>270</samples>
            <resolution>1</resolution>
            <min_angle>-1.46263</min_angle>
            <max_angle>1.46263</max_angle>
          </horizontal>
        </scan>
        <range>
          <min>0.15</min>
          <max>12.0</max>
          <resolution>0.01</resolution>
        </range>
        <noise>
          <type>gaussian</type>
          <mean>0.0</mean>
          <stddev>0.01</stddev>
        </noise>
      </ray>
      <alwaysOn>1</alwaysOn>
      <visualize>true</visualize>
    </sensor>
  </gazebo>
  <gazebo reference="depth_cam_link">
    <sensor name="robot_cam" type="camera">
      <camera>
        <horizontal_fov>1.047</horizontal_fov>
        <image>
          <width>640</width>
          <height>400</height>
        </image>
        <clip>
          <near>0.1</near>
          <far>10</far>
        </clip>
      </camera>
      <always_on>1</always_on>
      <update_rate>30</update_rate>
      <visualize>true</visualize>
      <camera_info_topic>/depth_cam/rgb/camera_info</camera_info_topic>
      <topic>/depth_cam/depth_cam</topic>
      <enable_metrics>true</enable_metrics>
    </sensor>
  </gazebo>
  <gazebo>
    <!-- Joint state publisher -->
    <plugin filename="/opt/ros/humble/share/ign_ros2_control/../../lib/libign_ros2_control-system.so" name="ign_ros2_control::IgnitionROS2ControlPlugin">
      <parameters>/home/chefchun/ros2_workspace/src/turtlebot3_simulations/turtlebot3_gazebo/config/robot_config.yaml</parameters>
    </plugin>
    <!-- joint -->
    <plugin filename="libignition-gazebo-joint-state-publisher-system.so" name="ignition::gazebo::systems::JointStatePublisher">
      <topic>joint_states</topic>
    </plugin>
    <!-- sensor-liar -->
    <plugin filename="ignition-gazebo-sensors-system" name="ignition::gazebo::systems::Sensors">
      <render_engine>ogre2</render_engine>
    </plugin>
    <!-- imu -->
    <plugin filename="ignition-gazebo-imu-system" name="ignition::gazebo::systems::Imu"/>
    <!-- odom -->
    <plugin filename="ignition-gazebo-odometry-publisher-system" name="ignition::gazebo::systems::OdometryPublisher">
      <odom_publish_frequency>50</odom_publish_frequency>
      <odom_topic>/odom</odom_topic>
      <odom_frame>odom</odom_frame>
      <robot_base_frame>base_footprint</robot_base_frame>
      <tf_topic>/odom/tf</tf_topic>
    </plugin>
    <plugin filename="libHolonomicPlugin.so" name="holonomic_sim::HolonomicPlugin">
      <wheel_joint>wheel_joint</wheel_joint>
      <top_base_joint>top_wheel_base_joint</top_base_joint>
      <bottom_base_joint>bottom_wheel_base_joint</bottom_base_joint>
    </plugin>
  </gazebo>
</robot>
